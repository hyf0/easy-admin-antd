(window.webpackJsonp=window.webpackJsonp||[]).push([[5,13],{140:function(e,r,n){"use strict";n.r(r),n.d(r,"default",(function(){return S}));var t={};n.r(t),n.d(t,"login",(function(){return v}));n(111);var a=n(56),o=(n(221),n(237)),i=(n(259),n(379)),u=(n(261),n(378)),l=n(0),c=n.n(l),s=n(23),m=n(239),f=n(238),p=n(8),d=(n(208),n(86));function y(e,r,n,t,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?r(l):Promise.resolve(l).then(t,a)}function h(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function i(e){y(o,t,a,i,u,"next",e)}function u(e){y(o,t,a,i,u,"throw",e)}i(void 0)}))}}function v(e,r){return b.apply(this,arguments)}function b(){return(b=h(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("admin"!==r&&"user"!==r){e.next=2;break}return e.abrupt("return",{user:{name:"YunfeiHe",roles:[r]},token:"token123456789"});case 2:return e.abrupt("return",null);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g={user:t};function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],t=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(t=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);t=!0);}catch(e){a=!0,o=e}finally{try{t||null==u.return||u.return()}finally{if(a)throw o}}return n}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return E(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function S(){var e=w(u.a.useForm(),1)[0],r=w(Object(l.useState)(!1),2),n=r[0],t=r[1],y=Object(s.d)(),h=Object(p.g)(),v=Object(l.useCallback)((function(r){t(!0),e.validateFields().then((function(e){var r=e.username,n=e.password;return console.log("username",r),g.user.login(r,n)})).then((function(e){if(null==e)throw new Error("登录失败");t(!1),y(d.a.login.createSetRoles(e.user.roles)),y(d.a.login.createSetUser(e.user)),y(h.push("/"))})).catch((function(e){console.warn(e),t(!1)})),r.preventDefault()}),[u.a]);return c.a.createElement("div",{className:"pages-login"},c.a.createElement("div",{className:"pages-login-main"},c.a.createElement("h1",null,"登录"),c.a.createElement(u.a,{name:"normal_login",className:"login-form",form:e,initialValues:{remember:!0},onFinish:function(e){console.log("Received values of form: ",e)}},c.a.createElement(u.a.Item,{name:"username",initialValue:"admin",rules:[{required:!0,message:"Please input your Username!"}]},c.a.createElement(i.a,{prefix:c.a.createElement(m.a,{className:"site-form-item-icon"}),placeholder:"Username"})),c.a.createElement(u.a.Item,{name:"password",initialValue:"admin",rules:[{required:!0,message:"Please input your Password!"}]},c.a.createElement(i.a,{prefix:c.a.createElement(f.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),c.a.createElement(u.a.Item,null,c.a.createElement(u.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},c.a.createElement(o.a,null,"Remember me"))),c.a.createElement(u.a.Item,null,c.a.createElement(a.a,{type:"primary",htmlType:"submit",className:"login-form-button",onClick:v,loading:n,disabled:n},"Log in")))))}},208:function(e,r,n){}}]);