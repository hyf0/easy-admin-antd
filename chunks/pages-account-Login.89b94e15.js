(window.webpackJsonp=window.webpackJsonp||[]).push([[5,13],{145:function(e,r,t){"use strict";t.r(r),t.d(r,"default",(function(){return k}));var n={};t.r(n),t.d(n,"login",(function(){return v}));t(115);var a=t(56),i=(t(230),t(244)),o=(t(247),t(420)),l=(t(270),t(418)),u=(t(272),t(419)),s=t(0),c=t.n(s),m=t(23),f=t(246),p=t(245),d=t(8),y=(t(213),t(86));function g(e,r,t,n,a,i,o){try{var l=e[i](o),u=l.value}catch(e){return void t(e)}l.done?r(u):Promise.resolve(u).then(n,a)}function h(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var i=e.apply(r,t);function o(e){g(i,n,a,o,l,"next",e)}function l(e){g(i,n,a,o,l,"throw",e)}o(void 0)}))}}function v(e,r){return b.apply(this,arguments)}function b(){return(b=h(regeneratorRuntime.mark((function e(r,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,2e3)}));case 2:if("admin"!==r&&"user"!==r){e.next=4;break}return e.abrupt("return",{user:{name:"YunfeiHe",roles:[r]},token:"token123456789"});case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w={user:n};function E(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return t}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return S(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function k(){var e=E(u.a.useForm(),1)[0],r=E(Object(s.useState)(!1),2),t=r[0],n=r[1],g=Object(m.d)(),h=Object(d.g)(),v=Object(s.useCallback)((function(r){n(!0),e.validateFields().then((function(e){var r=e.username,t=e.password;return w.user.login(r,t)})).then((function(e){if(null==e)throw new Error("登录失败");n(!1),g(y.a.login.createSetRoles(e.user.roles)),g(y.a.login.createSetUser(e.user)),g(h.push("/"))})).catch((function(e){console.warn(e),n(!1)})),r.preventDefault()}),[u.a]);return c.a.createElement("div",{className:"pages-login"},c.a.createElement("div",{className:"pages-login-main"},c.a.createElement(l.a.Title,{className:"pages-login-main-title",level:1},"登录系统"),c.a.createElement(u.a,{name:"normal_login",className:"login-form",form:e,initialValues:{remember:!0}},c.a.createElement(u.a.Item,{name:"username",initialValue:"admin",rules:[{required:!0,message:"Please input your Username!"}]},c.a.createElement(o.a,{size:"large",prefix:c.a.createElement(f.a,{className:"site-form-item-icon"}),placeholder:"Username"})),c.a.createElement(u.a.Item,{name:"password",initialValue:"admin",rules:[{required:!0,message:"Please input your Password!"}]},c.a.createElement(o.a,{size:"large",prefix:c.a.createElement(p.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),c.a.createElement(u.a.Item,null,c.a.createElement(u.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},c.a.createElement(i.a,{className:"white"},"记住我"))),c.a.createElement(u.a.Item,null,c.a.createElement(a.a,{type:"primary",htmlType:"submit",className:"login-form-button",onClick:v,size:"large",loading:t,disabled:t},"登录")))))}},213:function(e,r,t){}}]);